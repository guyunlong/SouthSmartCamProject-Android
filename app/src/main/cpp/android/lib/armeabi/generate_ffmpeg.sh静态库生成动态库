#!/bin/bash
#Change NDK to your Android NDK location
NDK=/opt/android/android-ndk-r11c
PLATFORM=$NDK/platforms/android-18/arch-arm
TOOLCHAIN=/Users/gyl1/android-toolchain

$TOOLCHAIN/bin/arm-linux-androideabi-ld -rpath-link=$PLATFORM/usr/lib -L$PLATFORM/usr/lib -L./ -soname libffmpeg.so -shared -nostdlib -Bsymbolic --whole-archive --no-undefined -o libffmpeg.so \
    /opt/compile/x264/android/arm/lib/libx264.a \
    libavcodec.a \
    libavfilter.a \
    libswresample.a \
    libavformat.a \
    libavutil.a \
    libswscale.a \
    libpostproc.a \
    libavdevice.a \
    -lc -lm -lz -ldl -llog --dynamic-linker=/system/bin/linker $TOOLCHAIN/lib/gcc/arm-linux-androideabi/4.9/libgcc.a 

echo generate ffmpeg finished
